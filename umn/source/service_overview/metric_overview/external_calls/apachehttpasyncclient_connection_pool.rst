:original_name: apm_01_0053.html

.. _apm_01_0053:

ApacheHttpAsyncClient Connection Pool
=====================================

This section describes the types, names, and meanings of ApacheHttpAsyncClient connection pool metrics collected by APM.

.. table:: **Table 1** ApacheHttpAsyncClient collection parameters

   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+-------------------------------------------------------------+
   | Parameter                                     | Data Type | Application Type | Default | Supported Start Agent Version | Supported End Agent Version | Description                                                 |
   +===============================================+===========+==================+=========+===============================+=============================+=============================================================+
   | Threshold (ms) for Reporting Connection Trace | integer   | JAVA             | 1       | 2.1.6                         | ``-``                       | Threshold (ms) for reporting connection traces              |
   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+-------------------------------------------------------------+
   | Obtain Pool Info or Not                       | radio     | JAVA             | 1       | 2.1.6                         | ``-``                       | Whether to obtain pool information when getting connections |
   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+-------------------------------------------------------------+

.. table:: **Table 2** ApacheHttpAsyncClient connection pool metrics

   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Category                                                                                                     | Metric        | Name          | Description                                           | Unit  | Data Type | Default Aggregation Mode |
   +==============================================================================================================+===============+===============+=======================================================+=======+===========+==========================+
   | Connection pool (**connectionPool**: statistics about ApacheHttpAsyncClient connections in different states) | poolId        | poolId        | ApacheHttpAsyncClient connection pool ID              | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | available     | available     | Number of idle connections in the connection pool     | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | leased        | leased        | Number of connections occupied                        | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | max           | max           | Maximum number of connections in the connection pool  | ``-`` | INT       | MAX                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | pending       | pending       | Number of pending connections in the connection pool  | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Connection pool route (**collectionPoolRoute**: APM counts connection statistics by pool route.)             | poolId        | poolId        | ApacheHttpAsyncClient connection pool ID              | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | route         | route         | Routing information of the connection pool            | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | available     | available     | Number of idle connections in the connection pool     | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | leased        | leased        | Number of connections occupied                        | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | max           | max           | Maximum number of connections in the connection pool  | ``-`` | INT       | MAX                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | pending       | pending       | Number of pending connections in the connection pool  | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Connection details (**connection**)                                                                          | route         | route         | Route                                                 | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | invokeCount   | invokeCount   | Number of calls                                       | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | totalTime     | totalTime     | Total time                                            | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | errorCount    | errorCount    | Number of errors                                      | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | maxTime       | maxTime       | Maximum response time                                 | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range1        | range1        | Number of requests with 0-10 ms response time         | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range2        | range2        | Number of requests with 10-100 ms response time       | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range3        | range3        | Number of requests with 100-500 ms response time      | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range4        | range4        | Number of requests with 500-1000 ms response time     | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range5        | range5        | Number of requests with 1-10s response time           | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | range6        | range6        | Number of requests with response time longer than 10s | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                              | concurrentMax | concurrentMax | Maximum concurrency                                   | ``-`` | INT       | MAX                      |
   +--------------------------------------------------------------------------------------------------------------+---------------+---------------+-------------------------------------------------------+-------+-----------+--------------------------+
