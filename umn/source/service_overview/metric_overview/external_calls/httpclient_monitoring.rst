:original_name: apm_01_0051.html

.. _apm_01_0051:

HttpClient Monitoring
=====================

This section describes the types, names, and meanings of HttpClient metrics collected by APM.

.. table:: **Table 1** HttpClient collection parameters

   +---------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                       | Data Type | Application Type | Default | Supported Start Agent Version | Supported End Agent Version | Description                                                                                                                                             |
   +=================================+===========+==================+=========+===============================+=============================+=========================================================================================================================================================+
   | URL Normalization Configuration | obj_array | JAVA             | ``-``   | 2.0.0                         | ``-``                       | URL normalization configuration, based on which some RESTful URLs are normalized. There are four modes: "startwith", "endwith", "include", and "regex". |
   +---------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** HttpClient metrics

   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | Category                                                                                                       | Metric             | Name               | Description                                                     | Unit  | Data Type | Default Aggregation Mode |
   +================================================================================================================+====================+====================+=================================================================+=======+===========+==========================+
   | Exception (**exception**: HttpClient call exception statistics)                                                | exceptionType      | exceptionType      | Exception type                                                  | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | count              | count              | Number of times the exception has occurred                      | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | message            | message            | Message returned when the exception occurred                    | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | stackTrace         | stackTrace         | Exception stack information                                     | ``-`` | CLOB      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | causeType          | causeType          | Exception class                                                 | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | Cluster metrics (**hostInvocation**: APM counts HttpClient URL call statistics by the called party's cluster.) | envId              | envId              | Cluster ID of the called party                                  | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | hostUri            | hostUri            | Called address                                                  | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | errorCount         | errorCount         | Number of errors that occur when the cluster URL is called      | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | invokeCount        | invokeCount        | Number of times that the cluster URL is called                  | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | maxTime            | maxTime            | Maximum response time for calling the cluster URL               | ms    | INT       | MAX                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | totalTime          | totalTime          | Total response time for calling the cluster URL                 | ms    | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | responseCloseCount | responseCloseCount | Number of closed responses when the cluster URL is called       | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range1             | range1             | Number of requests with 0-10 ms response time                   | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range2             | range2             | Number of requests with 10-100 ms response time                 | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range3             | range3             | Number of requests with 100-500 ms response time                | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range4             | range4             | Number of requests with 500-1000 ms response time               | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range5             | range5             | Number of requests with 1-10s response time                     | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range6             | range6             | Number of requests with response time longer than 10s           | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | HttpClient version (**info**: HttpClient package version statistics)                                           | httpClientVersion  | httpClientVersion  | Version of the HttpClient package                               | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | httpCoreVersion    | httpCoreVersion    | Version of the HttpCore package                                 | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | URL monitoring (**invocation**: APM counts URL call statistics by URL.)                                        | url                | url                | Called URL                                                      | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | method             | method             | HTTP method of the URL                                          | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | client             | client             | HTTP client type                                                | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | concurrentMax      | concurrentMax      | Maximum concurrency of the URL                                  | ``-`` | INT       | MAX                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | errorCount         | errorCount         | Number of call errors of the URL                                | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | errorTraceId       | errorTraceId       | ID of the trace that encounters an error in a collection period | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | slowTraceId        | slowTraceId        | ID of the slowest trace in a collection period                  | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | hostUri            | hostUri            | Called URL address                                              | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | invokeCount        | invokeCount        | Number of times that the URL is called                          | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | lastError          | lastError          | Error details                                                   | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | maxTime            | maxTime            | Maximum response time of the called URL                         | ms    | INT       | MAX                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | responseCloseCount | responseCloseCount | Number of closed responses when the URL is called               | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | totalTime          | totalTime          | Total response time of the called URL                           | ms    | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range1             | range1             | Number of requests with 0-10 ms response time                   | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range2             | range2             | Number of requests with 10-100 ms response time                 | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range3             | range3             | Number of requests with 100-500 ms response time                | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range4             | range4             | Number of requests with 500-1000 ms response time               | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range5             | range5             | Number of requests with 1-10s response time                     | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | range6             | range6             | Number of requests with response time longer than 10s           | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | envId              | envId              | Cluster ID corresponding to the called URL                      | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | HttpClient summary (**total**: summary about HttpClient call statistics)                                       | errorCount         | errorCount         | Total number of errors                                          | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | invokeCount        | invokeCount        | Total number of calls                                           | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | responseCloseCount | responseCloseCount | Total number of responses that are closed                       | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | totalTime          | totalTime          | Total response time                                             | ms    | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | Status code statistics (**code**: HttpClient call exception statistics)                                        | code               | code               | Status code                                                     | ``-`` | ENUM      | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | url                | url                | URL that returns the status code                                | ``-`` | STRING    | LAST                     |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                | count              | count              | Number of times that the status code has occurred               | ``-`` | INT       | SUM                      |
   +----------------------------------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
