:original_name: apm_01_0026.html

.. _apm_01_0026:

Communication Protocol
======================

This section describes the types, names, and meanings of WebSocket metrics collected by APM.

.. table:: **Table 1** WebSocket metrics

   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | Category                                                                             | Metric             | Name               | Description                                                     | Unit  | Data Type | Default Aggregation Mode |
   +======================================================================================+====================+====================+=================================================================+=======+===========+==========================+
   | Exception (**exception**: WebSocket exception statistics)                            | exceptionType      | exceptionType      | Exception type                                                  | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | causeType          | causeType          | Exception class                                                 | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | count              | count              | Number of times the exception has occurred                      | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | message            | message            | Message returned when the exception occurred                    | ``-`` | STRING    | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | stackTrace         | stackTrace         | Exception stack information                                     | ``-`` | CLOB      | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | WebSocket message monitoring (**message**: WebSocket message processing information) | url                | url                | URL corresponding to WebSocket                                  | ``-`` | ENUM      | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | errorCount         | errorCount         | Number of message processing errors                             | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | errorTraceId       | errorTraceId       | ID of the trace that encounters an error in a collection period | ``-`` | STRING    | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | slowTraceId        | slowTraceId        | ID of the slowest trace in a collection period                  | ``-`` | STRING    | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | invokeCount        | invokeCount        | Number of times that the message processing method is called    | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | traffic            | traffic            | Traffic                                                         | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | createSessionCount | createSessionCount | Number of connections that have been created                    | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | closeSessionCount  | closeSessionCount  | Number of closed connections                                    | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | closeReason        | closeReason        | Cause of the connection closure                                 | ``-`` | STRING    | LAST                     |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | maxTime            | maxTime            | Maximum response time                                           | ``-`` | INT       | MAX                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | totalTime          | totalTime          | Total response time                                             | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range1             | range1             | Number of requests with 0-10 ms response time                   | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range2             | range2             | Number of requests with 10-100 ms response time                 | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range3             | range3             | Number of requests with 100-500 ms response time                | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range4             | range4             | Number of requests with 500-1000 ms response time               | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range5             | range5             | Number of requests with 1-10s response time                     | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | range6             | range6             | Number of requests with response time longer than 10s           | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   | WebSocket summary (**total**: summary statistics)                                    | errorCount         | errorCount         | Total number of errors                                          | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | invokeCount        | invokeCount        | Total number of calls                                           | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | createSessionCount | createSessionCount | Number of connections that have been created                    | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | closeSessionCount  | closeSessionCount  | Number of closed connections                                    | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | traffic            | traffic            | Traffic                                                         | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                      | totalTime          | totalTime          | Total response time                                             | ``-`` | INT       | SUM                      |
   +--------------------------------------------------------------------------------------+--------------------+--------------------+-----------------------------------------------------------------+-------+-----------+--------------------------+
