:original_name: apm_01_0048.html

.. _apm_01_0048:

CSEProvider Cluster Monitoring
==============================

This section describes the types, names, and meanings of CSEProvider cluster metrics collected by APM.

.. table:: **Table 1** CSEProvider collection parameters

   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                         | Data Type | Application Type | Default | Supported Start Agent Version | Supported End Agent Version | Description                                                                                                                                                                                                                                                                                                   |
   +===================================+===========+==================+=========+===============================+=============================+===============================================================================================================================================================================================================================================================================================================+
   | Blocklist Configuration           | obj_array | JAVA             | ``-``   | 2.0.0                         | ``-``                       | URLs in the blocklist will not be collected. There are four modes: "startwith", "endwith", "include", and "regex".                                                                                                                                                                                            |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Max. Status Code Length           | integer   | JAVA             | 0       | 2.0.0                         | ``-``                       | The system parses the body content within the specified length and obtains the corresponding service status code.                                                                                                                                                                                             |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Key for Status Code Parsing       | array     | JAVA             | ``-``   | 2.0.0                         | ``-``                       | Key based on which the corresponding body content is to be obtained and reported as the service status code                                                                                                                                                                                                   |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Normal Status Code                | array     | JAVA             | ``-``   | 2.0.0                         | ``-``                       | If the obtained status code is not within the range, the request is regarded as an error trace.                                                                                                                                                                                                               |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Slow Request Threshold            | integer   | JAVA             | 800     | 2.0.0                         | ``-``                       | Slow request threshold. If the threshold is crossed, a URL will be regarded as a slow URL. The system will automatically increase the sampling ratio for it.                                                                                                                                                  |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Slow URL Threshold                | obj_array | JAVA             | ``-``   | 2.0.0                         | ``-``                       | Slow request threshold. If this threshold is crossed, the URL is defined as a slow URL. In that case, the system automatically increases the sampling ratio for it. There are four sampling policies: 1. Full sampling; 2. Percentage sampling; 3. Fixed-quantity sampling per minute; 4. Automatic sampling. |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Key for Header Value Interception | array     | JAVA             | ``-``   | 2.0.0                         | ``-``                       | Key based on which header value content is to be intercepted                                                                                                                                                                                                                                                  |
   +-----------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** CSEProvider cluster metrics

   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   | Category                                                                                                          | Metric        | Name          | Description                                               | Unit  | Data Type | Default Aggregation Mode |
   +===================================================================================================================+===============+===============+===========================================================+=======+===========+==========================+
   | CSEProvider cluster monitoring (**cluster**: APM counts call statistics based on the ID of the caller's cluster.) | clusterId     | clusterId     | Cluster ID of the caller                                  | ``-`` | ENUM      | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | errorCount    | errorCount    | Number of times that the cluster fails to be called       | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | invokeCount   | invokeCount   | Number of cluster calls                                   | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | maxTime       | maxTime       | Maximum response time for calling the cluster             | ms    | INT       | MAX                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | totalTime     | totalTime     | Total response time for calling the cluster               | ms    | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   | CSEProvider call details (**detail**: APM counts call statistics by URL.)                                         | qualifiedName | qualifiedName | Called URL of CSEProvider                                 | ``-`` | ENUM      | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | method        | method        | HTTP method of the called CSEProvider URL                 | ``-`` | ENUM      | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | concurrentMax | concurrentMax | Maximum concurrency of the CSEProvider URL                | ``-`` | INT       | MAX                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | errorCount    | errorCount    | Number of errors occur when the CSEProvider URL is called | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | invokeCount   | invokeCount   | Number of times that the CSEProvider URL is called        | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | lastError     | lastError     | Call error details                                        | ``-`` | STRING    | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | maxTime       | maxTime       | Maximum response time for calling the CSEProvider URL     | ms    | INT       | MAX                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | totalTime     | totalTime     | Total response time for calling the CSEProvider URL       | ms    | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range1        | range1        | Number of requests with 0-10 ms response time             | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range2        | range2        | Number of requests with 10-100 ms response time           | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range3        | range3        | Number of requests with 100-500 ms response time          | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range4        | range4        | Number of requests with 500-1000 ms response time         | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range5        | range5        | Number of requests with 1-10s response time               | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | range6        | range6        | Number of requests with response time longer than 10s     | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   | CSEProvider summary (**total**: summary of all URL statistics)                                                    | errorCount    | errorCount    | Total number of CSEProvider call errors                   | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | invokeCount   | invokeCount   | Total number of CSEProvider calls                         | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | totalTime     | totalTime     | Total response time of calling CSEProvider                | ms    | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   | Status code monitoring (**statuscode**: APM counts URL call statistics based on the status code returned.)        | code          | code          | HTTP status code                                          | ``-`` | ENUM      | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | count         | count         | Number of times that the status code has occurred         | ``-`` | INT       | SUM                      |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
   |                                                                                                                   | url           | url           | Sample URL which returns the status code                  | ``-`` | STRING    | LAST                     |
   +-------------------------------------------------------------------------------------------------------------------+---------------+---------------+-----------------------------------------------------------+-------+-----------+--------------------------+
