:original_name: apm_01_0033.html

.. _apm_01_0033:

C3P0 Connection Pool Monitoring
===============================

This section describes the types, names, and meanings of C3P0 connection pool metrics collected by APM.

.. table:: **Table 1** Collection parameters for C3P0 connection pool monitoring

   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+--------------------------------------------------------------------------------------------------------------------------+
   | Parameter                                     | Data Type | Application Type | Default | Supported Start Agent Version | Supported End Agent Version | Description                                                                                                              |
   +===============================================+===========+==================+=========+===============================+=============================+==========================================================================================================================+
   | Threshold (ms) for Reporting Connection Trace | integer   | JAVA             | 1       | 2.1.3                         | ``-``                       | Threshold for reporting getConnection method traces. If the threshold is not exceeded, such traces will not be reported. |
   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+--------------------------------------------------------------------------------------------------------------------------+
   | Obtain Pool Info or Not                       | radio     | JAVA             | false   | 2.1.3                         | ``-``                       | Whether to obtain pool information when getting connections                                                              |
   +-----------------------------------------------+-----------+------------------+---------+-------------------------------+-----------------------------+--------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** C3P0 connection pool metrics

   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Category                                                  | Metric                   | Name                     | Description                                           | Unit  | Data Type | Default Aggregation Mode |
   +===========================================================+==========================+==========================+=======================================================+=======+===========+==========================+
   | Data source (**dataSource**)                              | url                      | URL                      | URL                                                   | ``-`` | ENUM      | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | driverClass              | driverClass              | Driver                                                | ``-`` | STRING    | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | initialPoolSize          | initialPoolSize          | Number of initialized connections                     | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | minPoolSize              | minPoolSize              | Minimum connection pool size                          | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | maxPoolSize              | maxPoolSize              | Maximum connection pool size                          | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | numIdleConnections       | numIdleConnections       | Number of idle connections                            | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | numBusyConnections       | numBusyConnections       | Number of busy connections                            | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | numConnections           | numConnections           | Total number of connections                           | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | maxIdleTime              | maxIdleTime              | Maximum connection idle time                          | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | idleConnectionTestPeriod | idleConnectionTestPeriod | Interval for checking for idle connections            | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | testConnectionOnCheckout | testConnectionOnCheckout | Connection validity check during check-out            | ``-`` | STRING    | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | testConnectionOnCheckin  | testConnectionOnCheckin  | Connection validity check during check-in             | ``-`` | STRING    | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | acquireRetryAttempts     | acquireRetryAttempts     | Number of Connection retry times                      | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | acquireRetryDelay        | acquireRetryDelay        | Connection retry interval                             | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | acquireIncrement         | acquireIncrement         | Number of connections created if no connection exists | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Connection details (**connection**)                       | url                      | url                      | Connection address                                    | ``-`` | ENUM      | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | invokeCount              | invokeCount              | Number of calls                                       | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | totalTime                | totalTime                | Total time                                            | ``-`` | INT       | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | errorCount               | errorCount               | Number of errors                                      | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | maxTime                  | maxTime                  | Maximum response time                                 | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range1                   | range1                   | Number of requests with 0-10 ms response time         | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range2                   | range2                   | Number of requests with 10-100 ms response time       | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range3                   | range3                   | Number of requests with 100-500 ms response time      | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range4                   | range4                   | Number of requests with 500-1000 ms response time     | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range5                   | range5                   | Number of requests with 1-10s response time           | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | range6                   | range6                   | Number of requests with response time longer than 10s | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | concurrentMax            | concurrentMax            | Maximum concurrency                                   | ``-`` | INT       | MAX                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Version (**version**)                                     | version                  | version                  | Version                                               | ``-`` | STRING    | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   | Exception (**exception**: C3P0 call exception statistics) | exceptionType            | exceptionType            | Exception type                                        | ``-`` | ENUM      | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | causeType                | causeType                | Exception class                                       | ``-`` | ENUM      | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | count                    | count                    | Number of times the exception has occurred            | ``-`` | INT       | SUM                      |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | message                  | message                  | Message returned when the exception occurred          | ``-`` | STRING    | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
   |                                                           | stackTrace               | stackTrace               | Exception stack information                           | ``-`` | CLOB      | LAST                     |
   +-----------------------------------------------------------+--------------------------+--------------------------+-------------------------------------------------------+-------+-----------+--------------------------+
